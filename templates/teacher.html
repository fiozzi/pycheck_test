{% extends 'base.html' %}

{% block content %}
    <h1>{% block title %} Teacher: {% endblock %}</h1>
    <div class='teacher'>
        ID: <b>{{ teacher['IDTeacher'] }}</b><br />
        First name:<b>{{ teacher['firstname'] }}</b><br />
        Last name:<b>{{teacher['Lastname'] }}</b><br />
        Notes:<b>{{teacher['notes'] }}</b><br />
        Department:<b>{{teacher['department'] }}</b><br />
        Position: <b>{{teacher['position'] }}</b><br />
    </div>
    <hr>
    <form name="edit_teacher_data" action="{{ url_for('edit_teacher', idteacher=teacher['IDTeacher']) }}" method="GET">
        <input type="submit" value="Edit data above">
    </form>
    <br />
    <form name="delete_teacher" action="{{ url_for('delete_teacher', idteacher=teacher['IDTeacher']) }}" method="POST">
        <input type="submit" value="Delete above teacher" onclick="return confirm('Are you sure you want to delete this teacher?')">
    </form>
    <br />
    Total Hours Done: {{ total_teacher_hours }}<br />
    Teaching Load: {{ teacher_load }}<br />
    <br />
    <table>
        <tr>
            <th align="left">Course</th>
            <th>Hours</th>
            <th>Actions</th>
        </tr>
        <div class='hours'>
            {% for teacher_hour in teacher_hours %}
            <tr>
                <td>{{ teacher_hour['CourseCode'] }} {{ teacher_hour['CourseName'] }}</td>
                <td align="center">{{ teacher_hour['Hours'] }}</td>
                <td style="display: flex;">
                    <form name="edit_hours_{{ teacher_hour['IDTeachershours'] }}" 
                        action="{{ url_for('edit_teacher_hour', idteachershours=teacher_hour['IDTeachershours']) }}" method="GET">
                    <input type="submit" value="Edit this">
                    </form>
                    <form name="remove_hours_{{ teacher_hour['IDTeachershours'] }}" 
                        action="{{ url_for('remove_teacher_hour', idteachershours=teacher_hour['IDTeachershours']) }}" method="POST">
                    <input type="submit" value="Delete this" onclick="return confirm('Are you sure you want to delete this hours slot?')">
                    </form>
                </td>
            </tr>
            {% endfor %}
        </div>
    </table>
    <form name="add_teacher_hour_{{ teacher['IDTeacher'] }}" action="{{ url_for('add_teacher_hour', idteacher=teacher['idteacher'] )}}" method="POST">
        Add hours:<br />
        Course: 
        <select name="idcoursehours">
            {% for course in current_courses %}
            <option value="{{ course['IDCourseHours'] }}">{{ course['CourseDesc'] }}</option>
            {% endfor %}
        </select>
        Hours: <input type="number" name="hours" value="{{ request.form['hours'] }}"></input><br />
        <input type="submit" value="Add this">
    </form>

{% endblock %}